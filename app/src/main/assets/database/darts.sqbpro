<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="darts.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="4547"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="game" custom_title="0" dock_id="1" table="4,4:maingame"/><dock_state state="000000ff00000000fd000000010000000200000a5f00000469fc0100000001fb000000160064006f0063006b00420072006f0077007300650031010000000000000a5f0000011100ffffff000002870000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="field" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="39"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="field_type" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="43"/><column index="2" value="60"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="game" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="42"/><column index="2" value="74"/><column index="3" value="85"/><column index="4" value="85"/><column index="5" value="102"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="game_mode" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="52"/><column index="2" value="143"/><column index="3" value="154"/><column index="4" value="74"/><column index="5" value="105"/><column index="6" value="105"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="game_mode_config" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="58"/><column index="2" value="161"/><column index="3" value="169"/><column index="4" value="159"/><column index="5" value="178"/><column index="6" value="229"/><column index="7" value="195"/><column index="8" value="188"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="game_mode_type" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="57"/><column index="2" value="71"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="leg" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="38"/><column index="2" value="47"/><column index="3" value="67"/><column index="4" value="68"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="score_calculation" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="46"/><column index="2" value="82"/><column index="3" value="136"/><column index="4" value="86"/><column index="5" value="141"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="score_modifier" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="51"/><column index="2" value="88"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="score_type" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="45"/><column index="2" value="61"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="set" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="40"/><column index="2" value="63"/><column index="3" value="69"/><column index="4" value="71"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="throw" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort><column index="2" mode="1"/></sort><column_widths><column index="1" value="46"/><column index="2" value="66"/><column index="3" value="52"/><column index="4" value="68"/><column index="5" value="55"/><column index="6" value="87"/><column index="7" value="130"/><column index="8" value="59"/></column_widths><filter_values><column index="0" value="0"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="Game Insert">--insert into score_calculation (sc_id, sc_by_type, sc_by_type_modifier, sc_by_value, sc_by_value_modifier) -- classic score scheme (+ Points)?
--values
--(-1, 0, 1, 0, 0); 

-- Create game mode 
insert into game_mode_config (gmc_id, gmc_check_in_field_type, gmc_check_out_field_type, gmc_random_step_order, gmc_repeat_step_on_failure, gmc_immediate_proceed_on_success, gmc_success_score_calculation, gmc_failure_score_calculation)
VALUES
(-1, 0, 2, 0, 0, 0, null, null); -- classic double out 

insert into game_mode (gm_id, gm_game_mode_type, gm_game_mode_config, gm_name, gm_start_score, gm_score_type) VALUES
(0, 0, -1, &quot;501 DO&quot;, 501, 0); -- classic 501


-- Create Game (Classic 501 DO)
insert into game (g_id, g_credat, g_num_sets, g_num_legs) 
VALUES
(0, &quot;2024-01-09&quot;, 2, 2);

insert into game_player (gp_game, gp_player) 
VALUES
(0, 0),
(0, 1);

insert into &quot;set&quot; (s_id, s_game, s_ordinal, s_winner) 
VALUES
(0, 0, 0, 1),
(1, 0, 1, 0),
(2, 0, 3, null);


insert into leg (l_id, l_set, l_ordinal, l_winner) 
VALUES
(0, 0, 0, 0),
(1, 0, 1, 1),
(2, 0, 2, 0),
(3, 1, 0, 0),
(4, 1, 1, 0);

insert into throw (t_leg, t_player, t_turn, t_ordinal, t_field, t_field_type, t_game_mode_step, t_score) VALUES
(0, 0, 0, 0, 20, 3, null, 60),
(0, 0, 0, 1, 20, 3, null, 60),
(0, 0, 0, 2, 20, 1, null, 20),
(0, 0, 1, 0, 20, 1, null, 20),
(0, 0, 1, 1, 20, 1, null, 20),
(0, 0, 1, 2, 5, 1, null, 5),
(0, 0, 2, 0, 20, 1, null, 20),
(0, 0, 2, 1, 20, 1, null, 20),
(0, 0, 2, 2, 20, 1, null, 20),
(0, 0, 3, 0, 20, 3, null, 60),
(0, 0, 3, 1, 19, 1, null, 19),
(0, 0, 3, 2, 19, 3, null, 57),
(0, 0, 4, 0, 20, 3, null, 60),
(0, 0, 4, 1, 5, 1, null, 5),
(0, 0, 4, 2, 15, 1, null, 15),
(0, 1, 0, 0, 20, 3, null, 60),
(0, 1, 0, 1, 20, 3, null, 60),
(0, 1, 0, 2, 20, 1, null, 20),
(0, 1, 1, 0, 20, 1, null, 20),
(0, 1, 1, 1, 20, 1, null, 20),
(0, 1, 1, 2, 5, 1, null, 5),
(0, 1, 2, 0, 20, 1, null, 20),
(0, 1, 2, 1, 20, 1, null, 20),
(0, 1, 2, 2, 20, 1, null, 20),
(0, 1, 3, 0, 20, 3, null, 60),
(0, 1, 3, 1, 19, 1, null, 19),
(0, 1, 3, 2, 19, 3, null, 57),
(0, 1, 4, 0, 20, 3, null, 60),
(0, 1, 4, 1, 5, 1, null, 5),
(0, 1, 4, 2, 15, 1, null, 15),
(0, 1, 5, 0, 20, 2, null, 40),
(1, 0, 0, 0, 20, 3, null, 60),
(1, 0, 0, 1, 20, 3, null, 60),
(1, 0, 0, 2, 20, 1, null, 20),
(1, 0, 1, 0, 20, 1, null, 20),
(1, 0, 1, 1, 20, 1, null, 20),
(1, 0, 1, 2, 5, 1, null, 5),
(1, 0, 2, 0, 20, 1, null, 20),
(1, 0, 2, 1, 20, 1, null, 20),
(1, 0, 2, 2, 20, 1, null, 20),
(1, 0, 3, 0, 20, 3, null, 60),
(1, 0, 3, 1, 19, 1, null, 19),
(1, 0, 3, 2, 19, 3, null, 57),
(1, 0, 4, 0, 20, 3, null, 60),
(1, 0, 4, 1, 5, 1, null, 5),
(1, 0, 4, 2, 15, 1, null, 15),
(1, 1, 0, 0, 20, 3, null, 60),
(1, 1, 0, 1, 20, 3, null, 60),
(1, 1, 0, 2, 20, 1, null, 20),
(1, 1, 1, 0, 20, 1, null, 20),
(1, 1, 1, 1, 20, 1, null, 20),
(1, 1, 1, 2, 5, 1, null, 5),
(1, 1, 2, 0, 20, 1, null, 20),
(1, 1, 2, 1, 20, 1, null, 20),
(1, 1, 2, 2, 20, 1, null, 20),
(1, 1, 3, 0, 20, 3, null, 60),
(1, 1, 3, 1, 19, 1, null, 19),
(1, 1, 3, 2, 19, 3, null, 57),
(1, 1, 4, 0, 20, 3, null, 60),
(1, 1, 4, 1, 5, 1, null, 5),
(1, 1, 4, 2, 15, 1, null, 15),
(1, 1, 5, 0, 20, 2, null, 40),
(2, 0, 0, 0, 20, 3, null, 60),
(2, 0, 0, 1, 20, 3, null, 60),
(2, 0, 0, 2, 20, 1, null, 20),
(2, 0, 1, 0, 20, 1, null, 20),
(2, 0, 1, 1, 20, 1, null, 20),
(2, 0, 1, 2, 5, 1, null, 5),
(2, 0, 2, 0, 20, 1, null, 20),
(2, 0, 2, 1, 20, 1, null, 20),
(2, 0, 2, 2, 20, 1, null, 20),
(2, 0, 3, 0, 20, 3, null, 60),
(2, 0, 3, 1, 19, 1, null, 19),
(2, 0, 3, 2, 19, 3, null, 57),
(2, 0, 4, 0, 20, 3, null, 60),
(2, 0, 4, 1, 5, 1, null, 5),
(2, 0, 4, 2, 15, 1, null, 15),
(2, 0, 5, 0, 20, 2, null, 40),
(2, 1, 0, 0, 20, 3, null, 60),
(2, 1, 0, 1, 20, 3, null, 60),
(2, 1, 0, 2, 20, 1, null, 20),
(2, 1, 1, 0, 20, 1, null, 20),
(2, 1, 1, 1, 20, 1, null, 20),
(2, 1, 1, 2, 5, 1, null, 5),
(2, 1, 2, 0, 20, 1, null, 20),
(2, 1, 2, 1, 20, 1, null, 20),
(2, 1, 2, 2, 20, 1, null, 20),
(2, 1, 3, 0, 20, 3, null, 60),
(2, 1, 3, 1, 19, 1, null, 19),
(2, 1, 3, 2, 19, 3, null, 57),
(2, 1, 4, 0, 20, 3, null, 60),
(2, 1, 4, 1, 5, 1, null, 5),
(2, 1, 4, 2, 15, 1, null, 15),
(3, 0, 0, 0, 20, 3, null, 60),
(3, 0, 0, 1, 20, 3, null, 60),
(3, 0, 0, 2, 20, 1, null, 20),
(3, 0, 1, 0, 20, 1, null, 20),
(3, 0, 1, 1, 20, 1, null, 20),
(3, 0, 1, 2, 5, 1, null, 5),
(3, 0, 2, 0, 20, 1, null, 20),
(3, 0, 2, 1, 20, 1, null, 20),
(3, 0, 2, 2, 20, 1, null, 20),
(3, 0, 3, 0, 20, 3, null, 60),
(3, 0, 3, 1, 19, 1, null, 19),
(3, 0, 3, 2, 19, 3, null, 57),
(3, 0, 4, 0, 20, 3, null, 60),
(3, 0, 4, 1, 5, 1, null, 5),
(3, 0, 4, 2, 15, 1, null, 15),
(3, 0, 5, 0, 20, 2, null, 40),
(3, 1, 0, 0, 20, 3, null, 60),
(3, 1, 0, 1, 20, 3, null, 60),
(3, 1, 0, 2, 20, 1, null, 20),
(3, 1, 1, 0, 20, 1, null, 20),
(3, 1, 1, 1, 20, 1, null, 20),
(3, 1, 1, 2, 5, 1, null, 5),
(3, 1, 2, 0, 20, 1, null, 20),
(3, 1, 2, 1, 20, 1, null, 20),
(3, 1, 2, 2, 20, 1, null, 20),
(3, 1, 3, 0, 20, 3, null, 60),
(3, 1, 3, 1, 19, 1, null, 19),
(3, 1, 3, 2, 19, 3, null, 57),
(3, 1, 4, 0, 20, 3, null, 60),
(3, 1, 4, 1, 5, 1, null, 5),
(3, 1, 4, 2, 15, 1, null, 15),
(4, 0, 0, 0, 20, 3, null, 60),
(4, 0, 0, 1, 20, 3, null, 60),
(4, 0, 0, 2, 20, 1, null, 20),
(4, 0, 1, 0, 20, 1, null, 20),
(4, 0, 1, 1, 20, 1, null, 20),
(4, 0, 1, 2, 5, 1, null, 5),
(4, 0, 2, 0, 20, 1, null, 20),
(4, 0, 2, 1, 20, 1, null, 20),
(4, 0, 2, 2, 20, 1, null, 20),
(4, 0, 3, 0, 20, 3, null, 60),
(4, 0, 3, 1, 19, 1, null, 19),
(4, 0, 3, 2, 19, 3, null, 57),
(4, 0, 4, 0, 20, 3, null, 60),
(4, 0, 4, 1, 5, 1, null, 5),
(4, 0, 4, 2, 15, 1, null, 15),
(4, 0, 5, 0, 20, 2, null, 40),
(4, 1, 0, 0, 20, 3, null, 60),
(4, 1, 0, 1, 20, 3, null, 60),
(4, 1, 0, 2, 20, 1, null, 20),
(4, 1, 1, 0, 20, 1, null, 20),
(4, 1, 1, 1, 20, 1, null, 20),
(4, 1, 1, 2, 5, 1, null, 5),
(4, 1, 2, 0, 20, 1, null, 20),
(4, 1, 2, 1, 20, 1, null, 20),
(4, 1, 2, 2, 20, 1, null, 20),
(4, 1, 3, 0, 20, 3, null, 60),
(4, 1, 3, 1, 19, 1, null, 19),
(4, 1, 3, 2, 19, 3, null, 57),
(4, 1, 4, 0, 20, 3, null, 60),
(4, 1, 4, 1, 5, 1, null, 5),
(4, 1, 4, 2, 15, 1, null, 15),
(5, 0, 0, 0, 20, 3, null, 60),
(5, 0, 0, 1, 20, 3, null, 60),
(5, 0, 0, 2, 20, 1, null, 20),
(5, 1, 0, 0, 20, 1, null, 20),
(5, 1, 0, 1, 20, 1, null, 20),
(5, 1, 0, 2, 5, 1, null, 5);








</sql><sql name="Game Stats*">select * from game;

select * from leg;

-- game overview (set, num legs, winner)
select l_set as &quot;set&quot;, count(l_id) as &quot;num legs&quot;, s_winner as &quot;winner&quot; from game
join &quot;set&quot; on s_game = g_id
join leg on l_set = s_id
group by l_set;


-- curr leg points
select t_player, gm_start_score - sum(t_score) from game
join game_mode on g_game_mode = gm_id
join &quot;set&quot; on s_game = g_id
join leg on l_set = s_id
join throw on t_leg = l_id
where l_set = 2
group by t_player;

-- leg averages,average formula: (scored points / darts thrown) *3
select t_leg as leg, t_player as player, cast(sum(t_score) as float) / count(t_score)*3 as average, sum(t_score) as scored_points, count(t_score) as darts_thrown from game
join &quot;set&quot; on s_game = g_id
join leg on l_set = s_id
join throw on t_leg = l_id
group by t_leg, t_player;



</sql><current_tab id="1"/></tab_sql></sqlb_project>
